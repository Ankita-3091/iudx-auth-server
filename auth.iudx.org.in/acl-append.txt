
Append access control policy
----------------------------

Endpoint:

	https://<auth-server>/auth/v1/acl/append

Description:

	This API is used to append access control rules to existing rules.

Called by:

	A a data provider with a valid class-3 or above certificate.

Methods:

	POST

Headers:

	content-type: "application/json"

Body in JSON format:

	{
		"policy" : "acl policy (a string) in aperture policy language"	// required
	}

HTTP response code:

	200
		If the policy has been successfully appended.

	400
		If the policy contains syntax errors.

Using pyIUDX SDK:

	from pyIUDX.auth import auth	
	
	iudx_auth = auth.Auth("certificate.pem","private-key.pem") 

	iudx_auth.append_policy("*@gov.in can access rs1.com/my-resource")

CURL example:

	Request (pretty version):

		curl -XPOST https://auth.iudx.org.in/auth/v1/acl/append		\
										\
			--cert certificate.pem --key private-key.pem		\
										\
			-H 'content-type: application/json'			\
										\
			-d '{"policy":"*@gov.in can access rs1.com/resource"}'

	Response:

		200 OK
		content-type : "application/json"

		{
			"success" : true
		}

Known limitations:

	If the access control rules contain regex on "id"s, then an authorized
	consumer can get a token for "id"s which may not exist.

	This is by design. Having regex makes writing rules easier.
	Also, the provider doesn't have to remember all valid "id"s.

	This issue is expected to be handled by the resource server,
	by rejecting any queries to invalid "id"s. 

See also:

	acl API:
		http://auth.iudx.org.in/acl.txt

	acl/set API:
		http://auth.iudx.org.in/acl-set.txt

	node-aperture at github.com:
		https://github.com/rbccps-iisc/node-aperture
